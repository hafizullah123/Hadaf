<?php
// ...existing PHP code...
?>
<!DOCTYPE html>
<html lang="fa" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Financial Page</title>
    <!-- Tailwind CSS & Chart.js -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body class="bg-gray-100 flex justify-center p-8">
    <!-- Main Container -->
    <div
      class="bg-white shadow-lg rounded-2xl p-6 w-[90%] border border-block-300"
    >
      <h2 class="text-xl font-bold mb-6">درآمد ها</h2>

      <!-- Section 1: Income List -->
      <div class="bg-gray-50 rounded-xl shadow p-4 mb-6">
        <h3 class="text-lg font-bold mb-4">لیست تمام درآمد ها</h3>
        <table class="w-full border text-center text-sm">
          <thead class="bg-gray-200">
            <tr>
              <th class="border p-2">پر داخت</th>
              <th class="border p-2">تخفیف</th>
              <th class="border p-2">بدهی</th>
              <th class="border p-2">اقدام</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="border p-2">۳۰۰</td>
              <td class="border p-2">۱۰٪</td>
              <td class="border p-2">۱۰۰</td>
              <td class="border p-2">ویرایش</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Section 2: Monthly Income Chart -->
      <div class="bg-gray-50 rounded-xl shadow p-4">
        <div class="flex justify-between items-center mb-4">
          <!-- Right side: Title -->
          <h3 class="text-lg font-bold">مقدار درآمد هر ماه (کورس ها)</h3>
          <!-- Left side: Year Dropdown -->
          <button class="bg-white border px-3 py-1 rounded shadow">
            ▼ ۱۴۰۳
          </button>
        </div>
        <canvas id="incomeChart" class="w-full h-64"></canvas>
      </div>
    </div>
    <script>
      // ترتیب صحیح تمام ماه‌ها از حمل تا حوت
      const months = [
        "حمل",
        "ثور",
        "جوزا",
        "سرطان",
        "اسد",
        "سنبله",
        "میزان",
        "عقرب",
        "قوس",
        "جدی",
        "دلو",
        "حوت",
      ];

      // مقادیر درآمد مطابق ترتیب ماه‌ها
      const incomeData = [
        7000, 5000, 8000, 6000, 9000, 7500, 8200, 7200, 6500, 5000, 5800, 7600,
      ];

      const ctx = document.getElementById("incomeChart").getContext("2d");
      new Chart(ctx, {
        type: "line",
        data: {
          labels: months, // ماه‌ها به ترتیب صحیح
          datasets: [
            {
              label: "درآمد (افغانی)",
              data: incomeData,
              borderColor: "black",
              backgroundColor: "rgba(0,0,0,0.1)",
              tension: 0.3,
            },
          ],
        },
        options: {
          responsive: true,
          plugins: {
            legend: { display: false },
            tooltip: {
              callbacks: {
                label: function (context) {
                  return context.parsed.y + " افغانی";
                },
              },
            },
          },
          scales: {
            y: {
              position: "right", // مبلغ از سمت راست نمایش داده می‌شود
              ticks: {
                callback: function (value) {
                  return value + " افغانی";
                },
              },
            },
            x: {
              reverse: false, // ماه‌ها از حمل تا حوت نمایش داده شوند
            },
          },
        },
      });
    </script>
  </body>
</html>
